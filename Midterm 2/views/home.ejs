<%- include("partials/header"); -%>
<%- include("partials/nav"); -%>

<div class="container-fluid">
  <div class="row row-cols-xs-1 row-cols-sm-3 row-cols-md-4 row-cols-lg-6 pt-5">
    <% if (arrCharacters && arrCharacters.length > 0) { %>
      <% arrCharacters.forEach((char) => { %>
        <div class="col m-4" onclick="redirectToGetRoute(`<%= char.id %>`, `<%=currentPage = currentPage%>`)">
          <div class="card text-center border-warning">
            <img src="<%= char.image %>" alt="<%= char.name %>" class="card-img-top">
            <h5 class="card-title mt-3"><%= char.name %></h5>
            <p class="card-text affiliation"><%= char.affl[0] %></p>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <p>No characters found.</p>
    <% } %>
  </div>

  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      <!-- Previous Button -->
      <li class="page-item">
        <a class="page-link" href="?page=<%= currentPage === 1 ? totalPages : currentPage - 1 %>">Previous</a>
      </li>
  
      <!-- Page Number Buttons -->
      <% for (let i = 1; i <= totalPages; i++) { %>
        <li class="page-item <%= currentPage === i ? 'active' : '' %>">
          <a class="page-link" href="?page=<%= i %>"><%= i %></a>
        </li>
      <% } %>
  
      <!-- Next Button -->
      <li class="page-item">
        <a class="page-link" href="?page=<%= currentPage === totalPages ? 1 : currentPage + 1 %>">Next</a>
      </li>
    </ul>
  </nav>
  
</div>

<%- include("partials/footer"); -%>
